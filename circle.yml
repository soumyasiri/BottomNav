#
#  Build Configuration for continuous integration
#
machine:

  environment:

    APK_PATH: '/outputs/apk/app-paid-release.apk'

  java:
    version: oraclejdk8

dependencies:
    pre:
      # Update Android dependent SDK and tools
      # That settings need to be synced with Android Studio build settings
      - echo y | android update sdk --no-ui --all --filter tools,extra-android-m2repository,extra-android-support,android-25
      - echo y | android update sdk --no-ui --all --filter build-tools-25.0.2

test:
    override:
        - ./gradlew assembleRelease -PCIversionName=$APP_VERSION_NAME -PCIversionCode=$((APP_VERSION_CODE+1))
        - cp -r BottomNav/build/outputs/apk $CIRCLE_ARTIFACTS


general:
  branches:
    only:
      - master

deployment:
      develop:
        branch: master
        commands:
          - ./scripts/deploy_release.sh
#          - ./scripts/deploy_release.sh $CIRCLE_ARTIFACTS$APK_PATH $HOCKEYAPP_ACCESS_TOKEN $HOCKEYAPP_BOTTOMNAV_RELEASE_APP_ID
